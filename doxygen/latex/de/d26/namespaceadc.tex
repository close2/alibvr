\hypertarget{namespaceadc}{}\section{adc Namespace Reference}
\label{namespaceadc}\index{adc@{adc}}
\subsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \hyperlink{namespaceadc_1_1Input}{Input}
\begin{DoxyCompactList}\small\item\em In addition to the A\+D\+C-\/pins the adc subsystem can also use an internal temperature sensor, an internal 1.\+1V reference voltage and ground as input for a conversion. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classadc_1_1Adc}{Adc}
\begin{DoxyCompactList}\small\item\em Static functions for initialization, adc controls and irqs. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{namespaceadc_a0e6e6773a0ed848acb0887f1ed3c76ae}{}\label{namespaceadc_a0e6e6773a0ed848acb0887f1ed3c76ae} 
typedef void($\ast$ \hyperlink{namespaceadc_a0e6e6773a0ed848acb0887f1ed3c76ae}{task}) (const uint16\+\_\+t \&)
\begin{DoxyCompactList}\small\item\em The signature of a {\ttfamily Task} which may be passed as template argument. See the {\ttfamily Task} template argument for {\ttfamily \hyperlink{classadc_1_1Adc}{Adc}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{namespaceadc_a8094fa55ea1a7729bb35c230163c0f8f}{Mode} \{ \newline
{\bfseries Single\+Conversion} = 0x\+FF, 
\newline
{\bfseries Free\+Running} = 0b000, 
\newline
{\bfseries Trigger\+Analog\+Comp} = 0b001, 
\newline
{\bfseries Trigger\+P\+C\+Int0} = 0b010, 
\newline
{\bfseries Trigger\+Timer0\+CompA} = 0b011, 
\newline
{\bfseries Trigger\+Timer0\+OvF} = 0b100, 
\newline
{\bfseries Trigger\+Timer1\+CompB} = 0b101, 
\newline
{\bfseries Trigger\+Timer1\+OvF} = 0b110, 
\newline
{\bfseries Trigger\+Timer1\+Capt} = 0b111
 \}\begin{DoxyCompactList}\small\item\em An A\+D-\/conversion is either started manually or by specifying a trigger. \end{DoxyCompactList}
\item 
\hypertarget{namespaceadc_adcbc814e47ddcec8104b574b02228d97}{}\label{namespaceadc_adcbc814e47ddcec8104b574b02228d97} 
enum {\bfseries Ref} \{ \newline
{\bfseries A\+Ref} = 0b00, 
\newline
{\bfseries A\+Vcc} = 0b01, 
\newline
{\bfseries V1\+\_\+1} = 0b11
 \}
\item 
enum \hyperlink{namespaceadc_a92c3b192926a98ab7106f26c73bf85bb}{Global\+Irq} \{ \newline
\hyperlink{namespaceadc_a92c3b192926a98ab7106f26c73bf85bba06b9281e396db002010bde1de57262eb}{Global\+Irq\+::\+Auto}, 
\newline
\hyperlink{namespaceadc_a92c3b192926a98ab7106f26c73bf85bbace5a9f99f26d20a3bb29810a8716ae11}{Global\+Irq\+::\+Turn\+On}, 
\newline
\hyperlink{namespaceadc_a92c3b192926a98ab7106f26c73bf85bbaf0635e226d94e6a8339e6f237c2b6f1b}{Global\+Irq\+::\+Turn\+Off}, 
\newline
\hyperlink{namespaceadc_a92c3b192926a98ab7106f26c73bf85bba4bac8cdf0a968472b519b3b295d0d48b}{Global\+Irq\+::\+No\+Change}
 \}\begin{DoxyCompactList}\small\item\em This enum is passed to the {\ttfamily init()} function and controls if global irqs should be turned on with {\ttfamily sei()}. \end{DoxyCompactList}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$uint8\+\_\+t goto\+\_\+sleep\+\_\+for\+\_\+noise\+\_\+reduction$>$ }\\void \hyperlink{namespaceadc_ab569dff590b3bb745fb012aa29ec5723}{\+\_\+do\+\_\+adc} ()
\begin{DoxyCompactList}\small\item\em Starts a conversion while going to sleep. Then busywaits for the conversion to finish. The busywait is only necessary because other irqs might wake the cpu during a conversion. \end{DoxyCompactList}\item 
\hypertarget{namespaceadc_a4228912d1c32eafc1987a8adb80f4984}{}\label{namespaceadc_a4228912d1c32eafc1987a8adb80f4984} 
void \hyperlink{namespaceadc_a4228912d1c32eafc1987a8adb80f4984}{busy\+\_\+wait\+\_\+adc\+\_\+finished} ()
\begin{DoxyCompactList}\small\item\em Loops until the current conversion has finished. \end{DoxyCompactList}\item 
\hypertarget{namespaceadc_a0f2e8fa37ba3e91fc9e7a58e3543eaaa}{}\label{namespaceadc_a0f2e8fa37ba3e91fc9e7a58e3543eaaa} 
void {\bfseries irq\+\_\+handler\+\_\+for\+\_\+adc\+\_\+must\+\_\+be\+\_\+registered\+\_\+for\+\_\+noise\+\_\+reduction} ()
\item 
{\footnotesize template$<$$>$ }\\void \hyperlink{namespaceadc_a6e0b185b550424440d92bc2b129f6128}{\+\_\+do\+\_\+adc$<$ 0 $>$} ()
\begin{DoxyCompactList}\small\item\em Simply starts a conversion and then waits for the conversion to finish. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
By default adc related classes, enums,... are defined inside the {\ttfamily adc} namespace. If this creates a name clash with your code you may modify the namespace name by setting A\+L\+I\+B\+V\+R\+\_\+\+N\+A\+M\+E\+S\+P\+A\+C\+E\+\_\+\+A\+DC or A\+L\+I\+B\+V\+R\+\_\+\+N\+A\+M\+E\+S\+P\+A\+C\+E\+\_\+\+P\+R\+E\+F\+IX. 

\subsection{Enumeration Type Documentation}
\hypertarget{namespaceadc_a92c3b192926a98ab7106f26c73bf85bb}{}\label{namespaceadc_a92c3b192926a98ab7106f26c73bf85bb} 
\index{adc@{adc}!Global\+Irq@{Global\+Irq}}
\index{Global\+Irq@{Global\+Irq}!adc@{adc}}
\subsubsection{\texorpdfstring{Global\+Irq}{GlobalIrq}}
{\footnotesize\ttfamily enum \hyperlink{namespaceadc_a92c3b192926a98ab7106f26c73bf85bb}{adc\+::\+Global\+Irq}\hspace{0.3cm}{\ttfamily [strong]}}



This enum is passed to the {\ttfamily init()} function and controls if global irqs should be turned on with {\ttfamily sei()}. 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{Auto@{Auto}!adc@{adc}}\index{adc@{adc}!Auto@{Auto}}}\hypertarget{namespaceadc_a92c3b192926a98ab7106f26c73bf85bba06b9281e396db002010bde1de57262eb}{}\label{namespaceadc_a92c3b192926a98ab7106f26c73bf85bba06b9281e396db002010bde1de57262eb} 
Auto&If a {\ttfamily Task} is passed to {\ttfamily \hyperlink{classadc_1_1Adc}{Adc}}, global irqs are turned on. Otherwise equivalent to {\ttfamily No\+Change}. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Turn\+On@{Turn\+On}!adc@{adc}}\index{adc@{adc}!Turn\+On@{Turn\+On}}}\hypertarget{namespaceadc_a92c3b192926a98ab7106f26c73bf85bbace5a9f99f26d20a3bb29810a8716ae11}{}\label{namespaceadc_a92c3b192926a98ab7106f26c73bf85bbace5a9f99f26d20a3bb29810a8716ae11} 
Turn\+On&Global irqs will be turned on. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Turn\+Off@{Turn\+Off}!adc@{adc}}\index{adc@{adc}!Turn\+Off@{Turn\+Off}}}\hypertarget{namespaceadc_a92c3b192926a98ab7106f26c73bf85bbaf0635e226d94e6a8339e6f237c2b6f1b}{}\label{namespaceadc_a92c3b192926a98ab7106f26c73bf85bbaf0635e226d94e6a8339e6f237c2b6f1b} 
Turn\+Off&Global irqs will be turned off. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{No\+Change@{No\+Change}!adc@{adc}}\index{adc@{adc}!No\+Change@{No\+Change}}}\hypertarget{namespaceadc_a92c3b192926a98ab7106f26c73bf85bba4bac8cdf0a968472b519b3b295d0d48b}{}\label{namespaceadc_a92c3b192926a98ab7106f26c73bf85bba4bac8cdf0a968472b519b3b295d0d48b} 
No\+Change&Global irqs will not be changed. \\
\hline

\end{DoxyEnumFields}
\hypertarget{namespaceadc_a8094fa55ea1a7729bb35c230163c0f8f}{}\label{namespaceadc_a8094fa55ea1a7729bb35c230163c0f8f} 
\index{adc@{adc}!Mode@{Mode}}
\index{Mode@{Mode}!adc@{adc}}
\subsubsection{\texorpdfstring{Mode}{Mode}}
{\footnotesize\ttfamily enum \hyperlink{namespaceadc_a8094fa55ea1a7729bb35c230163c0f8f}{adc\+::\+Mode}\hspace{0.3cm}{\ttfamily [strong]}}



An A\+D-\/conversion is either started manually or by specifying a trigger. 

When the selected trigger (a bit in a register) changes from 0 to 1, a conversion is started.

All A\+DC triggers are I\+RQ bits. The Trigger\+Timer0\+OvF for instance starts a new conversion whenever the Irq flag for the Timer0 Overflow is changed from 0 to 1.

If the specific irq is enabled and global irqs are turned on the corresponding irq handler is called. (This behaviour is independent of the A\+DC subsystem.) Remember to clear the flag if you don\textquotesingle{}t have irqs enabled, as the trigger only activates when the bit changes from 0 to 1!

The A\+DC subsystem however does not care if an interrupt is raised and how the bit is set / cleared. It is therefore possible to use the triggers without enabling any irqs at all!

The Free\+Running mode is actually a trigger like the others. In Free\+Running mode an A\+DC is started whenever the A\+DC irq flag is set. This usually means, that the first conversion is started manually. Then, whenever an adc has finished a new conversion is automatically started, because the adc irq flag is set whenever a conversion finishes.

See irqs for a more detailed description of all irqs. 

\subsection{Function Documentation}
\hypertarget{namespaceadc_ab569dff590b3bb745fb012aa29ec5723}{}\label{namespaceadc_ab569dff590b3bb745fb012aa29ec5723} 
\index{adc@{adc}!\+\_\+do\+\_\+adc@{\+\_\+do\+\_\+adc}}
\index{\+\_\+do\+\_\+adc@{\+\_\+do\+\_\+adc}!adc@{adc}}
\subsubsection{\texorpdfstring{\+\_\+do\+\_\+adc()}{\_do\_adc()}}
{\footnotesize\ttfamily template$<$uint8\+\_\+t goto\+\_\+sleep\+\_\+for\+\_\+noise\+\_\+reduction$>$ \\
void adc\+::\+\_\+do\+\_\+adc (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Starts a conversion while going to sleep. Then busywaits for the conversion to finish. The busywait is only necessary because other irqs might wake the cpu during a conversion. 

There is another specialized \+\_\+do\+\_\+adc which does not goto sleep. \hypertarget{namespaceadc_a6e0b185b550424440d92bc2b129f6128}{}\label{namespaceadc_a6e0b185b550424440d92bc2b129f6128} 
\index{adc@{adc}!\+\_\+do\+\_\+adc$<$ 0 $>$@{\+\_\+do\+\_\+adc$<$ 0 $>$}}
\index{\+\_\+do\+\_\+adc$<$ 0 $>$@{\+\_\+do\+\_\+adc$<$ 0 $>$}!adc@{adc}}
\subsubsection{\texorpdfstring{\+\_\+do\+\_\+adc$<$ 0 $>$()}{\_do\_adc< 0 >()}}
{\footnotesize\ttfamily template$<$$>$ \\
void \hyperlink{namespaceadc_ab569dff590b3bb745fb012aa29ec5723}{adc\+::\+\_\+do\+\_\+adc}$<$ 0 $>$ (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Simply starts a conversion and then waits for the conversion to finish. 

This is the much simpler specialized version of \+\_\+do\+\_\+adc when going to sleep is not requested. 