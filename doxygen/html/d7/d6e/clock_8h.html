<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>alibvr: src/clock.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">alibvr
   </div>
   <div id="projectbrief">An avr Atmega 328 library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">clock.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file uses <code>Timer0</code> to provide a system clock.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;avr/io.h&gt;</code><br />
<code>#include &lt;avr/interrupt.h&gt;</code><br />
<code>#include &lt;util/atomic.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../df/dd9/bytes_8h_source.html">bytes.h</a>&quot;</code><br />
<code>#include &quot;irqs.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d86/limits_8h_source.html">limits.h</a>&quot;</code><br />
<code>#include &quot;internal/clock_prescale.h&quot;</code><br />
<code>#include &quot;internal/default_f_cpu.h&quot;</code><br />
<code>#include &quot;internal/register_irq_task_TIMER0_OVF.h&quot;</code><br />
</div>
<p><a href="../../d7/d6e/clock_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/de9/classclock_1_1__Clock.html">clock::_Clock</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization code and access to the _clock variable.  <a href="../../d8/de9/classclock_1_1__Clock.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:d9/d1f/namespaceclock"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html">clock</a></td></tr>
<tr class="memdesc:d9/d1f/namespaceclock"><td class="mdescLeft">&#160;</td><td class="mdescRight">System clock related code is in this namespace. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac363021621997735a818d8fce57aa9d7"><td class="memItemLeft" align="right" valign="top"><a id="ac363021621997735a818d8fce57aa9d7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ALIBVR_NAMESPACE_CLOCK</b>&#160;&#160;&#160;clock</td></tr>
<tr class="separator:ac363021621997735a818d8fce57aa9d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6058a86535ae6ffcdc9129048db86bc"><td class="memItemLeft" align="right" valign="top"><a id="ac6058a86535ae6ffcdc9129048db86bc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NEW_IRQ_TASK</b>&#160;&#160;&#160;ALIBVR_NAMESPACE_CLOCK::ClockIrqTask</td></tr>
<tr class="separator:ac6058a86535ae6ffcdc9129048db86bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97469a78e58c31e39c4cb8dd03a0b508"><td class="memItemLeft" align="right" valign="top"><a id="a97469a78e58c31e39c4cb8dd03a0b508"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_CLOCK_IN_USE</b>&#160;&#160;&#160;_CLOCK_IN_USE</td></tr>
<tr class="separator:a97469a78e58c31e39c4cb8dd03a0b508"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ac435d838e47eaebdb967aebfeab78eae"><td class="memItemLeft" align="right" valign="top"><a id="ac435d838e47eaebdb967aebfeab78eae"></a>
typedef _alibvr_clock_select::ClockSelect&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#ac435d838e47eaebdb967aebfeab78eae">clock::ClockSelect</a></td></tr>
<tr class="memdesc:ac435d838e47eaebdb967aebfeab78eae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Export of <code>_alibvr_clock_select::ClockSelect</code> <br /></td></tr>
<tr class="separator:ac435d838e47eaebdb967aebfeab78eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa67adb0b2215c44a4a770b6c36cfe8a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#aa67adb0b2215c44a4a770b6c36cfe8a7">clock::ClockIrqTask</a> (_irqs::Irq I)</td></tr>
<tr class="memdesc:aa67adb0b2215c44a4a770b6c36cfe8a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the Timer0 Overflow handler, which increments the system clock.  <a href="../../d9/d1f/namespaceclock.html#aa67adb0b2215c44a4a770b6c36cfe8a7">More...</a><br /></td></tr>
<tr class="separator:aa67adb0b2215c44a4a770b6c36cfe8a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac68f79977567f2ffe11ea30631653dd8"><td class="memTemplParams" colspan="2"><a id="ac68f79977567f2ffe11ea30631653dd8"></a>
template&lt;typename T &gt; </td></tr>
<tr class="memitem:ac68f79977567f2ffe11ea30631653dd8"><td class="memTemplItemLeft" align="right" valign="top">constexpr uint64_t&#160;</td><td class="memTemplItemRight" valign="bottom"><b>clock::_to64bit</b> (T v)</td></tr>
<tr class="separator:ac68f79977567f2ffe11ea30631653dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ee0d04356b216b1d04046c0e1b2d38"><td class="memTemplParams" colspan="2">template&lt;uint32_t Units, uint32_t Factor, uint32_t Prescale&gt; </td></tr>
<tr class="memitem:ae4ee0d04356b216b1d04046c0e1b2d38"><td class="memTemplItemLeft" align="right" valign="top">constexpr uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#ae4ee0d04356b216b1d04046c0e1b2d38">clock::units_to_time</a> ()</td></tr>
<tr class="memdesc:ae4ee0d04356b216b1d04046c0e1b2d38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert "units" to real time units.  <a href="../../d9/d1f/namespaceclock.html#ae4ee0d04356b216b1d04046c0e1b2d38">More...</a><br /></td></tr>
<tr class="separator:ae4ee0d04356b216b1d04046c0e1b2d38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6b5f264784ea96fd8629fec0c0f7131"><td class="memTemplParams" colspan="2">template&lt;uint32_t Time, uint32_t Factor, uint32_t Prescale&gt; </td></tr>
<tr class="memitem:ac6b5f264784ea96fd8629fec0c0f7131"><td class="memTemplItemLeft" align="right" valign="top">constexpr uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#ac6b5f264784ea96fd8629fec0c0f7131">clock::time_to_units</a> ()</td></tr>
<tr class="memdesc:ac6b5f264784ea96fd8629fec0c0f7131"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert real time units to "units".  <a href="../../d9/d1f/namespaceclock.html#ac6b5f264784ea96fd8629fec0c0f7131">More...</a><br /></td></tr>
<tr class="separator:ac6b5f264784ea96fd8629fec0c0f7131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afadc978b0b25983f61b85b53ae468a51"><td class="memTemplParams" colspan="2">template&lt;uint32_t Factor, uint32_t Prescale = (uint32_t) _alibvr_clock_prescale::Prescale, typename T  = uint16_t&gt; </td></tr>
<tr class="memitem:afadc978b0b25983f61b85b53ae468a51"><td class="memTemplItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#afadc978b0b25983f61b85b53ae468a51">clock::units_to_time</a> (const T &amp;units)</td></tr>
<tr class="memdesc:afadc978b0b25983f61b85b53ae468a51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert "units" to real time units.  <a href="../../d9/d1f/namespaceclock.html#afadc978b0b25983f61b85b53ae468a51">More...</a><br /></td></tr>
<tr class="separator:afadc978b0b25983f61b85b53ae468a51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46fd6e3a91d0b307eeea0500d03d12fb"><td class="memTemplParams" colspan="2">template&lt;uint32_t Factor, uint32_t Prescale = (uint32_t) _alibvr_clock_prescale::Prescale, typename T  = uint16_t&gt; </td></tr>
<tr class="memitem:a46fd6e3a91d0b307eeea0500d03d12fb"><td class="memTemplItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a46fd6e3a91d0b307eeea0500d03d12fb">clock::time_to_units</a> (const T &amp;n)</td></tr>
<tr class="memdesc:a46fd6e3a91d0b307eeea0500d03d12fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert real time units to "units".  <a href="../../d9/d1f/namespaceclock.html#a46fd6e3a91d0b307eeea0500d03d12fb">More...</a><br /></td></tr>
<tr class="separator:a46fd6e3a91d0b307eeea0500d03d12fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e5ca91b796d0c96b8094ba1441daedc"><td class="memTemplParams" colspan="2">template&lt;ClockSelect P = _alibvr_clock_prescale::Prescale, typename T  = uint16_t&gt; </td></tr>
<tr class="memitem:a2e5ca91b796d0c96b8094ba1441daedc"><td class="memTemplItemLeft" align="right" valign="top">T&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a2e5ca91b796d0c96b8094ba1441daedc">clock::ms_to_units</a> (const T &amp;n)</td></tr>
<tr class="memdesc:a2e5ca91b796d0c96b8094ba1441daedc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert ms to "units".  <a href="../../d9/d1f/namespaceclock.html#a2e5ca91b796d0c96b8094ba1441daedc">More...</a><br /></td></tr>
<tr class="separator:a2e5ca91b796d0c96b8094ba1441daedc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac07c7dca2d34cd417aa968fa2ccab83b"><td class="memTemplParams" colspan="2">template&lt;ClockSelect P = _alibvr_clock_prescale::Prescale, typename T  = uint16_t&gt; </td></tr>
<tr class="memitem:ac07c7dca2d34cd417aa968fa2ccab83b"><td class="memTemplItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#ac07c7dca2d34cd417aa968fa2ccab83b">clock::us_to_units</a> (const T &amp;n)</td></tr>
<tr class="memdesc:ac07c7dca2d34cd417aa968fa2ccab83b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert µs to "units".  <a href="../../d9/d1f/namespaceclock.html#ac07c7dca2d34cd417aa968fa2ccab83b">More...</a><br /></td></tr>
<tr class="separator:ac07c7dca2d34cd417aa968fa2ccab83b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64b11929624655a5ac990b12829c8606"><td class="memTemplParams" colspan="2">template&lt;ClockSelect P = _alibvr_clock_prescale::Prescale, typename T  = uint16_t&gt; </td></tr>
<tr class="memitem:a64b11929624655a5ac990b12829c8606"><td class="memTemplItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a64b11929624655a5ac990b12829c8606">clock::units_to_ms</a> (const T &amp;units)</td></tr>
<tr class="memdesc:a64b11929624655a5ac990b12829c8606"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert "units" to ms.  <a href="../../d9/d1f/namespaceclock.html#a64b11929624655a5ac990b12829c8606">More...</a><br /></td></tr>
<tr class="separator:a64b11929624655a5ac990b12829c8606"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad223db3a13e650f8e16585cde9ff08ac"><td class="memTemplParams" colspan="2">template&lt;ClockSelect P = _alibvr_clock_prescale::Prescale, typename T  = uint16_t&gt; </td></tr>
<tr class="memitem:ad223db3a13e650f8e16585cde9ff08ac"><td class="memTemplItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#ad223db3a13e650f8e16585cde9ff08ac">clock::units_to_us</a> (const T &amp;units)</td></tr>
<tr class="memdesc:ad223db3a13e650f8e16585cde9ff08ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert "units" to µs.  <a href="../../d9/d1f/namespaceclock.html#ad223db3a13e650f8e16585cde9ff08ac">More...</a><br /></td></tr>
<tr class="separator:ad223db3a13e650f8e16585cde9ff08ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae159a2e83f7b30eeafe3d5be8a3f5ef6"><td class="memTemplParams" colspan="2">template&lt;uint32_t Time, ClockSelect P = _alibvr_clock_prescale::Prescale&gt; </td></tr>
<tr class="memitem:ae159a2e83f7b30eeafe3d5be8a3f5ef6"><td class="memTemplItemLeft" align="right" valign="top">constexpr uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#ae159a2e83f7b30eeafe3d5be8a3f5ef6">clock::ms_to_units</a> ()</td></tr>
<tr class="memdesc:ae159a2e83f7b30eeafe3d5be8a3f5ef6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert ms to "units".  <a href="../../d9/d1f/namespaceclock.html#ae159a2e83f7b30eeafe3d5be8a3f5ef6">More...</a><br /></td></tr>
<tr class="separator:ae159a2e83f7b30eeafe3d5be8a3f5ef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a058555acfdfbc406daf1cb9331b0bc6f"><td class="memTemplParams" colspan="2">template&lt;uint32_t Time, ClockSelect P = _alibvr_clock_prescale::Prescale&gt; </td></tr>
<tr class="memitem:a058555acfdfbc406daf1cb9331b0bc6f"><td class="memTemplItemLeft" align="right" valign="top">constexpr uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a058555acfdfbc406daf1cb9331b0bc6f">clock::us_to_units</a> ()</td></tr>
<tr class="memdesc:a058555acfdfbc406daf1cb9331b0bc6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert µs to "units".  <a href="../../d9/d1f/namespaceclock.html#a058555acfdfbc406daf1cb9331b0bc6f">More...</a><br /></td></tr>
<tr class="separator:a058555acfdfbc406daf1cb9331b0bc6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a475b3551d89e7a345492a61f70830bd8"><td class="memTemplParams" colspan="2">template&lt;uint32_t Units, ClockSelect P = _alibvr_clock_prescale::Prescale&gt; </td></tr>
<tr class="memitem:a475b3551d89e7a345492a61f70830bd8"><td class="memTemplItemLeft" align="right" valign="top">constexpr uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a475b3551d89e7a345492a61f70830bd8">clock::units_to_ms</a> ()</td></tr>
<tr class="memdesc:a475b3551d89e7a345492a61f70830bd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert "units" to ms.  <a href="../../d9/d1f/namespaceclock.html#a475b3551d89e7a345492a61f70830bd8">More...</a><br /></td></tr>
<tr class="separator:a475b3551d89e7a345492a61f70830bd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a320b3614df868e901b2f022f70a3d8ae"><td class="memTemplParams" colspan="2">template&lt;uint32_t Units, ClockSelect P = _alibvr_clock_prescale::Prescale&gt; </td></tr>
<tr class="memitem:a320b3614df868e901b2f022f70a3d8ae"><td class="memTemplItemLeft" align="right" valign="top">constexpr uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a320b3614df868e901b2f022f70a3d8ae">clock::units_to_us</a> ()</td></tr>
<tr class="memdesc:a320b3614df868e901b2f022f70a3d8ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert "units" to µs.  <a href="../../d9/d1f/namespaceclock.html#a320b3614df868e901b2f022f70a3d8ae">More...</a><br /></td></tr>
<tr class="separator:a320b3614df868e901b2f022f70a3d8ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2818f7b058e27771426f39c7aa0365cd"><td class="memTemplParams" colspan="2">template&lt;typename T , typename U &gt; </td></tr>
<tr class="memitem:a2818f7b058e27771426f39c7aa0365cd"><td class="memTemplItemLeft" align="right" valign="top">constexpr uint8_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a2818f7b058e27771426f39c7aa0365cd">clock::duration_passed</a> (const T &amp;previous_clock, const T &amp;current_clock, const U &amp;duration)</td></tr>
<tr class="memdesc:a2818f7b058e27771426f39c7aa0365cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate if the difference between previous_clock and current_clock is bigger than duration.  <a href="../../d9/d1f/namespaceclock.html#a2818f7b058e27771426f39c7aa0365cd">More...</a><br /></td></tr>
<tr class="separator:a2818f7b058e27771426f39c7aa0365cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4db26a90b5c001f2bb46af7a2069d63d"><td class="memTemplParams" colspan="2">template&lt;typename T , typename U &gt; </td></tr>
<tr class="memitem:a4db26a90b5c001f2bb46af7a2069d63d"><td class="memTemplItemLeft" align="right" valign="top">constexpr uint8_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a4db26a90b5c001f2bb46af7a2069d63d">clock::duration_passed</a> (const T &amp;previous_clock, const U &amp;duration)</td></tr>
<tr class="memdesc:a4db26a90b5c001f2bb46af7a2069d63d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate if duration has passed since previous_clock.  <a href="../../d9/d1f/namespaceclock.html#a4db26a90b5c001f2bb46af7a2069d63d">More...</a><br /></td></tr>
<tr class="separator:a4db26a90b5c001f2bb46af7a2069d63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a107ad02a77763be28bf63d43c566cf75"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a107ad02a77763be28bf63d43c566cf75"><td class="memTemplItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a107ad02a77763be28bf63d43c566cf75">clock::clock_reached</a> (const T &amp;clock, const T &amp;previous_clock, const T &amp;target_clock)</td></tr>
<tr class="memdesc:a107ad02a77763be28bf63d43c566cf75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate if target system clock has been reached.  <a href="../../d9/d1f/namespaceclock.html#a107ad02a77763be28bf63d43c566cf75">More...</a><br /></td></tr>
<tr class="separator:a107ad02a77763be28bf63d43c566cf75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9af9c9c3928a386721fa60473274f9f8"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a9af9c9c3928a386721fa60473274f9f8">clock::clock_reached</a> (const uint64_t &amp;clock, const uint64_t &amp;, const uint64_t &amp;target_clock)</td></tr>
<tr class="memdesc:a9af9c9c3928a386721fa60473274f9f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate if target system clock has been reached.  <a href="../../d9/d1f/namespaceclock.html#a9af9c9c3928a386721fa60473274f9f8">More...</a><br /></td></tr>
<tr class="separator:a9af9c9c3928a386721fa60473274f9f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a240d81de9119f92701aa5f26555972c4"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a240d81de9119f92701aa5f26555972c4"><td class="memTemplItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a240d81de9119f92701aa5f26555972c4">clock::clock_reached</a> (const T &amp;target_clock)</td></tr>
<tr class="memdesc:a240d81de9119f92701aa5f26555972c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate if target system clock has been reached.  <a href="../../d9/d1f/namespaceclock.html#a240d81de9119f92701aa5f26555972c4">More...</a><br /></td></tr>
<tr class="separator:a240d81de9119f92701aa5f26555972c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48932048c086f3d07ef74d9194cbfe1d"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a48932048c086f3d07ef74d9194cbfe1d">clock::clock_reached</a> (const uint64_t &amp;target_clock)</td></tr>
<tr class="memdesc:a48932048c086f3d07ef74d9194cbfe1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate if target system clock has been reached.  <a href="../../d9/d1f/namespaceclock.html#a48932048c086f3d07ef74d9194cbfe1d">More...</a><br /></td></tr>
<tr class="separator:a48932048c086f3d07ef74d9194cbfe1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0cfce972d3684eddb3dd61bb0baaf225"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="../../d6/db9/unionbits64__s.html">bits64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d1f/namespaceclock.html#a0cfce972d3684eddb3dd61bb0baaf225">clock::_clock</a></td></tr>
<tr class="memdesc:a0cfce972d3684eddb3dd61bb0baaf225"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the system clock.  <a href="../../d9/d1f/namespaceclock.html#a0cfce972d3684eddb3dd61bb0baaf225">More...</a><br /></td></tr>
<tr class="separator:a0cfce972d3684eddb3dd61bb0baaf225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8414359d2fd2b9f75143850c0e3bb4b5"><td class="memItemLeft" align="right" valign="top"><a id="a8414359d2fd2b9f75143850c0e3bb4b5"></a>
static _Clock&#160;</td><td class="memItemRight" valign="bottom"><b>clock::Clock</b></td></tr>
<tr class="separator:a8414359d2fd2b9f75143850c0e3bb4b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file uses <code>Timer0</code> to provide a system clock. </p>
<p>The system clock is derived from the IO-clock and must be converted to seconds.</p>
<p>Conversion functions are provided. Try to stay with the template versions, which can be calculated during compile time. Conversion of variables (with values unknown during compile time) will probably include division code, which is both big and slow.</p>
<p>It is usually possible to compare the difference of 2 time instances with a converted interval value:</p>
<p>Instead of (both examples in pseudocode):</p>
<div class="fragment"><div class="line">uint8_t clock1 = Clock;</div><div class="line"><span class="comment">// do something</span></div><div class="line">uint8_t duration = Clock - clock1;</div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="../../d9/d1f/namespaceclock.html#a64b11929624655a5ac990b12829c8606">units_to_ms</a>(duration) &gt; 5) <span class="comment">// work took more than 5 ms</span></div></div><!-- fragment --><p>write</p>
<div class="fragment"><div class="line">uint8_t clock1 = Clock;</div><div class="line"><span class="comment">// do something</span></div><div class="line">uint8_t duration = Clock - clock1;</div><div class="line"><span class="keywordflow">if</span> (duration &gt; ms_to_units&lt;5&gt;()) <span class="comment">// work took more than 5 ms</span></div></div><!-- fragment --><p><em>Global irqs are enabled unless the macro: <code>ALIBVR_CLOCK_NO_GLOBAL_IRQ</code> or <code>ALIBVR_NO_GLOBAL_IRQ</code> is defined!</em> By including this header directly or indirectly global irqs are enabled because of a static constructor in this file!</p>
<p>The clock is incremented inside the <code>Timer0</code> overflow irq handler. To activate the registered irq handler add <code>#include REGISTER_IRQS</code> after your <code>main</code> section. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
